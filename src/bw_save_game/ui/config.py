# bw-save-game - BioWare save game tools
# Copyright (C) 2024 Tim Niederhausen
#
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.
#
# Website: https://github.com/timniederhausen/bw_save_game
# -*- coding: utf-8 -*-

# Modders requested a specific order that matches the order inside the EBX files
FEATURE_MORPH_LIST_ORDER = [
    2657619172,
    340673977,
    340756320,
    3377072233,
    1545218401,
    2391455350,
    2095797861,
    4270779814,
    4066195121,
    2541444480,
    2713753847,
    340219565,
    1484895592,
    1484978737,
    3282254936,
    2613528884,
    2537327398,
    1485662972,
    3260486111,
    3266341403,
    4031955378,
    3235226012,
    1034642188,
    1467372161,
    540836859,
    541058338,
    2412996075,
    1025924661,
    3234497481,
    1087830595,
    866976265,
    1971617608,
    1971617622,
    993564382,
    2722854679,
    3455413701,
    2359501036,
    41034688,
    1354135113,
    3607064219,
    3069003762,
    453917389,
    1710768530,
    1885780962,
    189411230,
    1955613015,
    611559050,
    4192985501,
    3640687066,
    4151372998,
    3301952215,
    3252851776,
    3332902985,
    3252879198,
    1036843675,
    1037056962,
    3001200715,
    1421209127,
    3708852963,
    1671617264,
    1671617262,
    1085726946,
    265196757,
    1926912140,
    2352311931,
    4172411010,
    4002638973,
    1427942123,
    2592986506,
    1201088066,
    4110500778,
    4110723571,
    3381160922,
    1449636086,
    480993892,
    4111268286,
    3645936089,
    120479149,
    142001935,
    2115780008,
    4003224762,
    120006240,
    4025563592,
    4022586463,
    4031830229,
    1293531379,
    245735685,
    3131059107,
    3243948678,
    971246108,
    971049413,
    2573783596,
    3645105874,
    2480808388,
    621478483,
    1899133700,
    1879656834,
    2041190478,
    3651790815,
    3651454470,
    1337651855,
    4111392003,
    184774417,
    3651049291,
    1149204934,
    1149131039,
    1937673270,
    1148845494,
    1179667738,
    3582707725,
    1491870600,
    1149667794,
    1358558053,
    3772132236,
    1140991817,
    600528478,
    86974350,
    86630871,
    2548363390,
    382908626,
    650832704,
    87167386,
    373623816,
    2123770040,
    3619619028,
    2235896214,
    3591052929,
    374112412,
    719839104,
    916727088,
    719905113,
    1353438286,
    2324065752,
    1047282767,
    1441395636,
    1441451885,
    1006774148,
    1546645352,
    3972886138,
    1440699936,
    1596842499,
    3697011744,
    60495102,
    1173564416,
    2521272483,
    1637382227,
    2155158683,
    546232293,
    4165317874,
    3429737172,
    1793761948,
    74980994,
    1088599957,
    3706649449,
    3707002928,
    2712024761,
    3079689639,
    2872832165,
    1112858983,
    1574659568,
    1325723021,
    1325806164,
    2581167133,
    2162505411,
    2750960109,
    3470029491,
    2526111011,
    3428734191,
    3469549351,
    1762553191,
    1615374495,
    4173823558,
    1864094815,
    2562371640,
    2333231023,
    1441179652,
    302149887,
]


def _feature_morph_extract_key(morph: dict):
    try:
        return FEATURE_MORPH_LIST_ORDER.index(morph["nameHash"])
    except ValueError:
        return 99999


# TODO: shouldn't be done every frame...
def as_sorted_feature_morphs(morphs: list):
    return sorted(morphs, key=_feature_morph_extract_key)
